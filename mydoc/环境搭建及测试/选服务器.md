https://www.thinkmate.com/system/storage-superserver-540p-e1ctr45l/522540

原始的需求： 主要存储大小约为几十G到几百G不等的数据， 也会有文件几十K到几十M不等的数据。  稳定性：越稳定越好。      带宽：越大越好
            多少并发没有直接回答，间接渠道了解到并发度不高。    目前s3拆分为512MB的段大小，可以按照性能来做适当调整。     要求出s3接口，每天至少1T数据上传，每天的数据要保存两年，集群总容量预估会达到800T。 如果扩容简单可以先搭建400T的集群后续再扩容。



需求分析：   支持s3的开源存储软件，ceph和minio可能会比较好。 
            并发度不高，每天1T的数据，保存两年： 不需要做负载均衡，需要静默损坏。
            我觉得2：1纠删比较适合这个场景，性能较好，同时存储空间利用率比副本高。 (minio没有副本)
            磁盘选12T容量规格的，实际可用容量11T，集群可用容量800T，2：1纠删2/3实际容量，集群预留10%容量。计算可得需要 800 * 1.5 / 11 / 0.9 = 121 块盘。可以按照每台服务器20块盘，共需要6台服务器来配置。   (或者每台服务器40块盘，共3台服务器，满足ceph搭建集群最小节点数)


服务器可选项：
thinkmate.com/system/storage-superserver-540p-e1ctr45l/522540

以下服务器按照每台服务器20块盘，共6台服务器来选择的。
## BAREBONE
- Supermicro Storage SuperServer 540P-E1CTR45L - 45x 3.5" SATA/SAS - Broadcom 3808 12G SAS - Dual 10-GbE - 1600W 1+1 Redundant  

没得选

## PROCESSOR
The processor selection of this configuration is limited due to thermal restrictions. The maximum processor TDP supported in this configuration is 270W.
- Intel® Xeon® Gold 6314U Processor 32-Core 2.3GHz 48MB Cache (205W)  

不懂cpu。磁盘静默损坏的校验，纠删码的编码解码需要cpu支持。这款cpu核心比较多，L3 cache相对较大。

## MEMORY
- 8 * 32GB PC4-25600 3200MHz DDR4 ECC RDIMM

256GB内存， 按照1TB的盘对应1GB的内存， 20*11 = 220 < 256GB, 符合需求。64GB的内存相对与32GB，上电refresh性能影响较大，32GB是比较合适的选择。

## INTEL OPTANE PERSISTENT MEMORY
- No DC Persistent Memory

pcm介质的存储，性能比ssd快两个数量级，比dram慢一个数量级。不太适合当前的场景，没必要买。


## M.2 DRIVE
Use as a dedicated storage device for your Operating System

不会选 晚点问Renjian Zhou。装操作系统的ssd。可以选两块做raid 1，给操作系统加一个冗余。除了安装操作系统之外还会存放软件的日志。

## STORAGE DRIVE
Due to the complexity of integration this server requires a minimum of 20x HDDs or SSDs.

存数据的HDD， 选择20块12T规格的。区别主要在接口是SATA或者SAS， 可以按照之前的买。

## CONTROLLER CARD
- Supermicro AOC-S3808L-L8iT SAS3/SATA 8-Port Host Bus Adapter - PCIe 4.0 x8

没得选

## NETWORK CARD
Mellanox ConnectX-5 EN Series 100-Gigabit Ethernet Adapters

不会选  可选项区别比较大：速度，端口数，接口，电缆介质 都不一样。
最低速度： 按照单块HDD 200MB/s带宽，20块，最低200 * 20 * 8 / 1024 = 31Gb。

## NETWORK CARD

不会选， 这个跟上一项区别？？？

## PCI EXPRESS STORAGE CARD

不会选，看起来跟ssd有关的

## TRUSTED PLATFORM MODULE

不会选， 安全有关的。

## CABLES

不会选， 电缆。

## SERVER MANAGEMENT

不会选， 服务管理，外带管理和数据中心管理。

## OPERATING SYSTEM
Click the Compare button to get more information on limitations for each operating system including maximum memory and processor support.
- No Operating System
操作系统自己装

## SOFTWARE
操作系统都自己装了，软件自然就不需要了

## WARRANTY

保修， 问Renjian Zhou
